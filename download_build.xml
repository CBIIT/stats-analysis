<project name="caintegrator-spec" default="build_zip_file" basedir=".">
	<property file="basic_build.properties"/>

	<target name="build_dependency" if="anthill.artifacts.dir" depends="build_zip_file_anthill">
		<echo>
			Artifacts copied to ${anthill.artifacts.dir}
		</echo>
		<copy file="${project_name}.zip" todir="${anthill.artifacts.dir}"/>
	</target>
	<target name="build_codebase">
	     <echo>Building the caintegrator-analysis-commons.jar...</echo>
	    <ant target="build_jar" dir="."/>
	</target>
	<!--
	TARGET: Zip
		Zip the source code and compiled caintegrator-spec.jar
	-->
	<target name="build_zip_file" depends="build_codebase">
	     <zip destfile="${project_name}.zip">
			 <zipfileset dir="${build.source.dir}" prefix="${build.source.dir}"/>
			 <zipfileset dir="${build.deploy.lib.dir}" prefix="${build.deploy.lib.dir}">
			 	<include name="*.jar"/>
			 </zipfileset>
			 <zipfileset dir="${build.do.not.deploy.lib.dir}" prefix="${build.do.not.deploy.lib.dir}">
			 	<include name="*.jar"/>
			 </zipfileset>
			 <zipfileset dir="." prefix=".">
                <include name="build.xml"/>
                <include name="basic_build.properties"/>
                <include name="${project_name}.jar"/>
             </zipfileset>		
         </zip>
     </target>
	<target name="noop"/>
	<!--
	TARGET: Zip
		Zip the source code and compiled caintegrator-spec.jar
	-->
	<target name="build_zip_file_anthill">
		<delete dir="${build.download.dir}/${project_name}" failonerror="false"/>
		<mkdir dir="${build.download.dir}/${project_name}"/>
		<copy todir="${build.download.dir}/${project_name}">
            <fileset dir="${build.source.dir}"/>
            <fileset dir="${build.deploy.lib.dir}">
				<include name="*.jar"/>
			</fileset>
			<fileset dir="${build.do.not.deploy.lib.dir}">
				<include name="*.jar"/>
			</fileset>
            <fileset dir=".">
                    <include name="build.xml"/>
                    <include name="basic_build.xml"/>
            </fileset>		
         </copy>
         <zip destfile="${build.download.dir}/${project_name}.zip" basedir="${build.download.dir}/${project_name}"/>
         
     </target>
</project>
