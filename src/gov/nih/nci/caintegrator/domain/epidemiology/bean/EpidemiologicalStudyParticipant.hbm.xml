<?xml version="1.0" encoding="UTF-8"?>

<!--
	$Id: 
	
	$Log:
	
-->

<!DOCTYPE hibernate-mapping PUBLIC 
	"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping
	package="gov.nih.nci.caintegrator.domain.epidemiology.bean" >
	<class name="EpidemiologicalStudyParticipant"
		table="EPI_STUDY_PARTICIPANT" >

       <!-- id -->
       <id name="id" 
           column="EPI_STUDY_PARTICIPANT_ID">
           <generator class="native" />
       </id>

        <property name="caseControlStatus"
                 type="java.lang.String"
                 column="CASE_CONTROL_STATUS"/>

        <!-- administrativeGenderCode -->        
       <property name="administrativeGenderCode" 
                 type="java.lang.String" 
                 column="GENDER" />
                 
       <!-- ageAtDiagnosis
       <property name="ageAtDiagnosis" 
                 type="java.lang.Integer" 
                 column="AGE_AT_DIAGNOSIS" 
                 insert="false" 
                 update="false" /> -->

       <component name="ageAtDiagnosis" class="gov.nih.nci.caintegrator.domain.common.bean.NumericMeasurement"> 
            <property name="absoluteValue" column="AGE_AT_DIAGNOSIS" />
            <property name="minValue" column="AGE_AT_DIAGNOSIS_MIN" />
            <property name="maxValue" column="AGE_AT_DIAGNOSIS_MAX" />
       </component>

       <component name="ageAtDeath" class="gov.nih.nci.caintegrator.domain.common.bean.NumericMeasurement"> 
            <property name="absoluteValue" column="AGE_AT_DEATH" />
            <property name="minValue" column="AGE_AT_DEATH_MIN" />
            <property name="maxValue" column="AGE_AT_DEATH_MAX" />
       </component>

       <component name="ageAtEnrollment" class="gov.nih.nci.caintegrator.domain.common.bean.NumericMeasurement"> 
            <property name="absoluteValue" column="AGE_AT_ENROLL" />
            <property name="minValue" column="AGE_AT_ENROLL_MIN" />
            <property name="maxValue" column="AGE_AT_ENROLL_MAX" />
       </component>
             
       
        <!-- daysOnStudy -->                 
        <property name="daysOnStudy" 
                 type="java.lang.Integer" 
                 column="DAYS_ON_STUDY"  />
                 
        <!-- ethnicGroupCode -->                 
        <property name="ethnicGroupCode" 
                 type="java.lang.String" 
                 column="ETHNIC_GROUP_CODE"  />
                 
        <!-- familyHistory -->                 
        <property name="familyHistory" 
                 type="java.lang.String" 
                 column="FAMILY_HISTORY" />
                 
        <!-- institutionName -->                 
        <property name="institutionName" 
                 type="java.lang.String" 
                 column="INSTITUTION_NAME"  />
                 
        <!-- offStudyDate -->                 
        <property name="daysOffStudy" 
                 type="java.lang.Integer" 
                 column="DAYS_OFF_STUDY" />
                 
        <!-- raceCode -->                 
        <property name="raceCode" 
                 type="java.lang.String" 
                 column="RACE_CODE" 
                  />
                 
        <!-- studySubjectIdentifier -->                 
        <property name="studySubjectIdentifier" 
                 column="PARTICIPANT_DID" 
                  />     
                             
        <property name="weight" 
                 column="WEIGHT" />    
                              
        <property name="height" 
                 column="HEIGHT"  />   
                               
        <property name="waistCircumference" 
                 column="WAIST_CIRCUMFERENCE" />                 
                
	     <!--  survivalStatus -->                 
        <property name="survivalStatus" 
                 column="SURVIVAL_STATUS"
                  />                 
                 
     <!--  TSP Specimen ID               
        <property name="tspSpecimenId" 
                 type="java.lang.String"
                 column="TSP_SPECIMEN_ID"
                 insert="false" 
                 update="false" />   -->       
                 
        <!--  isOffStudy -->                 
        <property name="isOffStudy"
                 type="org.hibernate.type.YesNoType"
                 column="OFF_STUDY" />
         
      <!-- here is for m-m relationships --> 
      
      <set name="analysisGroupCollection" table="STDPT_ANALYSIS_GRP_AS" lazy="true">
         <cache usage="read-write" />
         <key column="PARTICIPANT_DID" />
         <many-to-many class="gov.nih.nci.caintegrator.domain.analysis.snp.bean.SNPAnalysisGroup"
                column="ANA_GRP_ID" />
      </set>      

      
      <!--  check with Srini-->
<!--   TODO: Fix this: Ram
       <set name="histologyCollection" table="HISTOLOGY" lazy="true">
         <cache usage="read-write" />
         <key column="PARTICIPANT_DID" />
         <many-to-many class="gov.nih.nci.caintegrator.domain.study.Histology" column="HISTOLOGY_ID" />
      </set>
      -->
    
    <!-- here is for 1-m relationships --> 
 
    <set name="activityCollection" inverse="true" cascade="none">
        <key column="PARTICIPANT_ID" not-null="false"/>
        <one-to-many class="gov.nih.nci.caintegrator.domain.study.bean.Activity"/>
    </set> 
 
     <set name="specimenCollection" lazy="true" inverse="true">
      <cache usage="read-write" />
      <key column="PARTICIPANT_ID" />
      <one-to-many class="gov.nih.nci.caintegrator.domain.study.bean.Specimen" />
    </set>  
    
    <set name="clinicalFindingCollection" lazy="true" inverse="true">
      <key column="PARTICIPANT_ID" />
      <one-to-many class="gov.nih.nci.caintegrator.domain.finding.clinical.bean.ClinicalFinding" />
    </set>  
   
<!-- 
    <set name="dietaryConsumptionCollection" lazy="true" inverse="true">
      <key column="PARTICIPANT_ID" />
      <one-to-many class="gov.nih.nci.caintegrator.domain.epidemiology.bean.DietaryConsumption" />
    </set>  
    -->
    <set name="tobaccoConsumptionCollection" lazy="true"  cascade="all">
      <key column="PARTICIPANT_ID" />
      <one-to-many class="gov.nih.nci.caintegrator.domain.epidemiology.bean.TobaccoConsumption" />
    </set>  
    <set name="environmentalFactorCollection" lazy="true" inverse="true">
      <key column="PARTICIPANT_ID" />
      <one-to-many class="gov.nih.nci.caintegrator.domain.epidemiology.bean.EnvironmentalFactor" />
    </set>  
    <set name="relativeCollection" lazy="true" inverse="true">
      <key column="PARTICIPANT_ID" />
      <one-to-many class="gov.nih.nci.caintegrator.domain.epidemiology.bean.Relative" />
    </set>  

    
     <!-- here is for m-1 relationships -->  
      <many-to-one name="study" class="gov.nih.nci.caintegrator.domain.study.bean.Study" column="STUDY_NAME"  />
      <set name="populationCollection" table="STD_PARTICIPANT_POPULATION_AS" lazy="true">
         <cache usage="read-write" />
         <key column="PARTICIPANT_ID" />
         <many-to-many class="gov.nih.nci.caintegrator.domain.study.bean.Population"
                column="POPULATION_ID" />
      </set>   
                 
	  <many-to-one name="behavioralAssessment" column="ASSESSMENT_ID" unique="true" not-null="false"/>
      <many-to-one name="lifestyle" column="LIFESTYLE_ID" unique="true" not-null="false"/>        
        
	</class>
</hibernate-mapping>